#!/usr/bin/env bash
set -o errexit
set -o nounset

print_heading(){
  local -r blue=$(tput setaf 4)
  local -r green=$(tput setaf 2)
  local -r normal=$(tput sgr0)
  local -r heading=$1
  local -r surround="${blue}########################${normal}"
  printf "%s %s %s\n" "$surround" "${green}${heading}${normal}" "$surround"
}
brew_update(){
  brew update
  brew upgrade
  brew upgrade --cask --greedy
  brew autoremove
  brew cleanup --prune 180
  brew doctor
}
app_store_update(){
  mas list
  mas upgrade
}
fish_update(){
  fish --command="fisher update"
}
neovim_update(){
  nvim --headless +PlugUpgrade +qall
  echo ""
  nvim --headless +PlugUpdate +qall
  echo ""
}
tmux_update(){
  if [ -f ~/.tmux/plugins/tpm/bin/update_plugins ]; then 
    ~/.tmux/plugins/tpm/bin/update_plugins all
  fi
}

main(){
  print_heading "Homebrew - Update"
  brew_update

  print_heading "App Store - Update"
  app_store_update

  print_heading "Fish Shell - Fisher Plugin Manager - Update"
  fish_update

  print_heading "NeoVim - Vim Plug - Update"
  neovim_update

  print_heading "Tmux - Tmux Plugin Manager (aka TMP) - Update"
  tmux_update

  print_heading "All updates terminted successfully"
}

main "$@"
